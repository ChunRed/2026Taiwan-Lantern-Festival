import{p as g,c as M,a6 as Y,b as y,f as h,d as _,F as k,r as O,n as R,t as T,i as z,h as C,w as D,j as W,k as ve,l as Z,m as A,q as H,s as $,v as J,x as P,y as K,z as E,A as Q,B as ee,C as L,D as te,E as j,G as be,H as se,I as N,J as ae,K as ne,L as xe,M as ye,N as oe,O as le,P as ie,Q as re,T as we,U as _e,V as ce,W as ge,X as ue,Y as de,Z as pe,$ as me,a0 as fe,a1 as he,a2 as w,o as B,a as ze,a7 as U,a8 as Se,_ as Ie,u as Fe,a9 as q,a5 as V,aa as Ce,ab as Re}from"./index-mQNq9sV0.js";const Me="/assets/Gen_test1-CCAaqer-.png",Ge={class:"w-full px-3 mt-3"},ke={class:"w-full flex items-center",style:{gap:"5px"}},We={class:"text-[12px] leading-none select-none"},Ae={class:"flex-1 overflow-y-auto px-6 py-6"},$e={class:"flex flex-col gap-3"},Pe={class:"flex items-start gap-2"},Ee=["src"],Le={class:"px-3 flex text-left"},je={class:"absolute bottom-3 flex-none right-3"},Ne={__name:"Gen_Information",props:{Gen:{type:Array,required:!0,default:()=>[0,0,0,0,0,0,0,0]},Rate:{type:Array,required:!0,default:()=>[0,0,0,0,0,0,0,0]}},setup(F){const e=F,i=[{label:(e.Rate[0]*100).toFixed(1).toString()+"%",value:e.Rate[0],color:e.Gen.length<1?"#000000":g[e.Gen[0]].themeColor},{label:(e.Rate[1]*100).toFixed(1).toString()+"%",value:e.Rate[1],color:e.Gen.length<2?"#000000":g[e.Gen[1]].themeColor},{label:(e.Rate[2]*100).toFixed(1).toString()+"%",value:e.Rate[2],color:e.Gen.length<3?"#000000":g[e.Gen[2]].themeColor},{label:(e.Rate[3]*100).toFixed(1).toString()+"%",value:e.Rate[3],color:e.Gen.length<4?"#000000":g[e.Gen[3]].themeColor},{label:(e.Rate[4]*100).toFixed(1).toString()+"%",value:e.Rate[4],color:e.Gen.length<5?"#000000":g[e.Gen[4]].themeColor},{label:(e.Rate[5]*100).toFixed(1).toString()+"%",value:e.Rate[5],color:e.Gen.length<6?"#000000":g[e.Gen[5]].themeColor},{label:(e.Rate[6]*100).toFixed(1).toString()+"%",value:e.Rate[6],color:e.Gen.length<7?"#000000":g[e.Gen[6]].themeColor},{label:(e.Rate[7]*100).toFixed(1).toString()+"%",value:e.Rate[7],color:e.Gen.length<8?"#000000":g[e.Gen[7]].themeColor}],r=M(()=>{const u=i.map(l=>({...l,value:Math.max(0,Number(l.value)||0)})).filter(l=>l.value>0),p=u.reduce((l,c)=>l+c.value,0)||1;return u.map(l=>({...l,pct:l.value/p*100}))}),v=u=>new URL(Object.assign({"../assets/Intro_collect.png":he,"../assets/Intro_gen.png":fe,"../assets/Intro_gen2.png":me,"../assets/Intro_gen3.png":pe,"../assets/Intro_gen4.png":de,"../assets/Intro_library.png":ue,"../assets/Intro_logo.png":ge,"../assets/Intro_map.png":ce,"../assets/Map-UI.png":_e,"../assets/Map.jpg":we,"../assets/Map.png":re,"../assets/deer-sm-1.png":ie,"../assets/deer_button.png":le,"../assets/deer_points.png":oe,"../assets/logo.svg":ye,"../assets/main.css":xe,"../assets/map_p.png":ne,"../assets/五節芒.png":ae,"../assets/五節芒W.png":N,"../assets/小葉桑.png":se,"../assets/小葉桑.svg":be,"../assets/小葉桑W.png":j,"../assets/月桃.png":te,"../assets/月桃W.png":L,"../assets/未知元素.png":ee,"../assets/構樹.png":Q,"../assets/構樹W.png":E,"../assets/穀穗.png":K,"../assets/穀穗W.png":P,"../assets/赤榕.png":J,"../assets/赤榕W.png":$,"../assets/金草蘭.png":H,"../assets/金草蘭W.png":A,"../assets/青剛櫟.png":Z,"../assets/青剛櫟.svg":ve,"../assets/青剛櫟W.png":W})[`../assets/${u}`],import.meta.url).href;return(u,p)=>{const l=Y("RouterLink");return h(),y(k,null,[_("div",Ge,[_("div",ke,[(h(!0),y(k,null,O(r.value,(c,x)=>(h(),y("div",{key:x,class:"rounded-[8px] flex items-center justify-center text-black font-medium transition-[flex-basis,width] duration-500 ease-out",style:R({flexBasis:c.pct+"%",height:"20px",backgroundColor:c.color})},[_("span",We,T(c.label??`${Math.round(c.pct)}%`),1)],4))),128))])]),_("div",Ae,[_("div",$e,[(h(!0),y(k,null,O(e.Gen.length,c=>(h(),y("div",{key:c,class:"relative flex items-center justify-between px-4 py-2 rounded-lg border border-white/20 text-base transition disabled:opacity-50 disabled:cursor-not-allowed"},[_("div",Pe,[_("img",{src:v(z(g)[e.Gen[c-1]].image),alt:"",class:"w-6 h-6"},null,8,Ee),_("div",Le,[_("span",{class:"font-medium text-[16px]",style:R({color:z(g)[e.Gen[c-1]].themeColor})},T(z(g)[e.Gen[c-1]].nameZh+" | "+z(g)[e.Gen[c-1]].nameEn),5)]),_("div",je,[C(l,{to:{name:"information",query:{id:z(g)[e.Gen[c-1]].id}},class:"flex h-6 w-6 items-center justify-center bg-black/60"},{default:D(()=>[_("span",{class:"text-3xl leading-none",style:R({color:z(g)[e.Gen[c-1]].themeColor})}," › ",4)]),_:2},1032,["to"])])])]))),128))]),p[0]||(p[0]=_("div",{class:"h-20"},null,-1))])],64)}}},Be={__name:"ExplosionEffect",props:{colors:{type:Array,default:()=>["#C8AAFF","#ffffff","#7093FF","#FFF2A6"]},duration:{type:Number,default:5e3},particleCount:{type:Number,default:250},minSize:{type:Number,default:4},maxSize:{type:Number,default:30},minForce:{type:Number,default:2},maxForce:{type:Number,default:8}},setup(F){const e=F,i=w(null);let r=null,v=null,u=[],p=0;const l=(m,s)=>Math.random()*(s-m)+m;class c{constructor(s,a,o,t,n,d,f){this.x=s,this.y=a;const b=l(0,Math.PI*2),I=l(d,f);this.vx=Math.cos(b)*I,this.vy=Math.sin(b)*I,this.color=o[Math.floor(Math.random()*o.length)],this.originalSize=l(t,n),this.size=this.originalSize,this.life=1,this.decay=l(.005,.015),this.shape=Math.floor(l(0,4)),this.rotation=l(0,Math.PI*2),this.rotationSpeed=l(-.1,.1)}update(){this.x+=this.vx,this.y+=this.vy,this.vx*=.96,this.vy*=.96,this.vy+=.05,this.life-=this.decay,this.size=this.originalSize*Math.max(0,this.life),this.rotation+=this.rotationSpeed}draw(s){if(this.life<=0||this.size<=0)return;s.save(),s.translate(this.x,this.y),s.rotate(this.rotation),s.globalAlpha=this.life,s.fillStyle=this.color,s.shadowBlur=10,s.shadowColor=this.color;const a=this.size;switch(this.shape){case 0:s.beginPath(),s.arc(0,0,a/2,0,Math.PI*2),s.fill();break;case 1:this.drawStar(s,4,a/2,a/6);break;case 2:s.fillRect(-a/2,-a/8,a,a/4),s.fillRect(-a/8,-a/2,a/4,a);break;case 3:s.fillRect(-a/2,-a/2,a,a);break}s.restore()}drawStar(s,a,o,t){let n=Math.PI/2*3,d=0,f=0,b=Math.PI/a;s.beginPath(),s.moveTo(0,0-o);for(let I=0;I<a;I++)d=Math.cos(n)*o,f=Math.sin(n)*o,s.lineTo(d,f),n+=b,d=Math.cos(n)*t,f=Math.sin(n)*t,s.lineTo(d,f),n+=b;s.lineTo(0,0-o),s.closePath(),s.fill()}}const x=()=>{i.value&&(i.value.width=window.innerWidth,i.value.height=window.innerHeight)},S=m=>{p||(p=m),!(m-p>e.duration)&&(!r||!i.value||(r.clearRect(0,0,i.value.width,i.value.height),r.globalCompositeOperation="lighter",u.forEach(a=>{a.update(),a.draw(r)}),u=u.filter(a=>a.life>0),u.length>0&&(v=requestAnimationFrame(S))))};return B(()=>{if(i.value){r=i.value.getContext("2d"),x(),window.addEventListener("resize",x);const m=window.innerWidth/2,s=window.innerHeight*.3;for(let a=0;a<e.particleCount;a++)u.push(new c(m,s,e.colors,e.minSize,e.maxSize,e.minForce,e.maxForce));v=requestAnimationFrame(S)}}),ze(()=>{cancelAnimationFrame(v),window.removeEventListener("resize",x)}),(m,s)=>(h(),y("canvas",{ref_key:"canvasRef",ref:i,class:"fixed top-0 left-0 w-full h-full pointer-events-none z-[50]"},null,512))}},X={__name:"FloatingIconsCanvas",props:{images:{type:Array,default:()=>[]},config:{type:Object,default:()=>({density:12,minSize:80,maxSize:200,speedX:.5,speedY:1,rotSpeed:.02,opacity:.4})}},setup(F){const e=F,i=w(null);let r,v,u=[],p=[],l=null;const c=()=>{if(u=[],p.length===0||!i.value)return;const{density:s,minSize:a,maxSize:o,speedX:t,speedY:n,rotSpeed:d}=e.config,f=i.value.parentElement.getBoundingClientRect(),b=f.width,I=f.height;for(let G=0;G<s;G++)u.push({img:p[G%p.length],x:Math.random()*b,y:Math.random()*I,size:a+Math.random()*(o-a),vx:(Math.random()-.5)*t,vy:-(Math.random()*.5+.5)*n,rot:Math.random()*Math.PI*2,vrot:(Math.random()-.5)*d})},x=async()=>{p=[];const s=e.images.map(o=>new Promise(t=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>t(null),n.src=o}));p=(await Promise.all(s)).filter(o=>o!==null),c()};U(()=>e.images,x,{deep:!0}),U(()=>e.config,c,{deep:!0});const S=()=>{if(!i.value||!r)return;const s=i.value.parentElement.getBoundingClientRect(),a=s.width,o=s.height;r.clearRect(0,0,a,o),u.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.rot+=t.vrot,t.x<-t.size&&(t.x=a+t.size),t.x>a+t.size&&(t.x=-t.size),t.y<-t.size&&(t.y=o+t.size),t.y>o+t.size&&(t.y=-t.size),r.save(),r.translate(t.x,t.y),r.rotate(t.rot),r.globalAlpha=e.config.opacity||.4,r.drawImage(t.img,-t.size/2,-t.size/2,t.size,t.size),r.restore()}),v=requestAnimationFrame(S)},m=()=>{if(!i.value)return;const s=i.value;r=s.getContext("2d"),l&&l.disconnect(),l=new ResizeObserver(a=>{for(const o of a){const t=o.contentRect,n=window.devicePixelRatio||1;s.width=t.width*n,s.height=t.height*n,r.scale(n,n)}}),s.parentElement&&l.observe(s.parentElement)};return B(()=>{m(),x(),S()}),Se(()=>{v&&cancelAnimationFrame(v),l&&l.disconnect()}),(s,a)=>(h(),y("canvas",{ref_key:"canvasRef",ref:i,class:"floating-canvas absolute inset-0 w-full h-full pointer-events-none z-[-1]"},null,512))}},Oe={class:"flex flex-col relative w-full h-full"},Te={class:"relative z-10 top-[0px] w-full"},Ue={key:0},qe={class:"flex justify-center relative w-full h-auto overflow-hidden"},Ve={key:1},Xe={class:"flex justify-center"},Ye={__name:"Gen-ShowView",setup(F){const e=Fe(),i=w(!0),r=w(!1),v=M(()=>{const o=e.ItemScale,t=e.gen;let n=-1,d=-1;for(let f=0;f<t.length;f++){const b=t[f];o[b]>n&&(n=o[b],d=b)}return d!==-1&&g[d]?g[d].themeColor:"#517ADA"}),u=w(0),p=w(.8),l=w(10),c=w({density:20,minSize:20,maxSize:120,speedX:.8,speedY:.3,rotSpeed:.02,opacity:1}),x=w({density:30,minSize:5,maxSize:20,speedX:.5,speedY:.6,rotSpeed:.03,opacity:.3}),S=M(()=>{const o=[...e.gen];return o.sort((n,d)=>e.ItemScale[d]-e.ItemScale[n]),o.slice(0,2).map(n=>new URL(Object.assign({"../assets/Intro_collect.png":he,"../assets/Intro_gen.png":fe,"../assets/Intro_gen2.png":me,"../assets/Intro_gen3.png":pe,"../assets/Intro_gen4.png":de,"../assets/Intro_library.png":ue,"../assets/Intro_logo.png":ge,"../assets/Intro_map.png":ce,"../assets/Map-UI.png":_e,"../assets/Map.png":re,"../assets/deer-sm-1.png":ie,"../assets/deer_button.png":le,"../assets/deer_points.png":oe,"../assets/map_p.png":ne,"../assets/五節芒.png":ae,"../assets/五節芒W.png":N,"../assets/小葉桑.png":se,"../assets/小葉桑W.png":j,"../assets/月桃.png":te,"../assets/月桃W.png":L,"../assets/未知元素.png":ee,"../assets/構樹.png":Q,"../assets/構樹W.png":E,"../assets/穀穗.png":K,"../assets/穀穗W.png":P,"../assets/赤榕.png":J,"../assets/赤榕W.png":$,"../assets/金草蘭.png":H,"../assets/金草蘭W.png":A,"../assets/青剛櫟.png":Z,"../assets/青剛櫟W.png":W})[`../assets/${g[n].nameZh}.png`],import.meta.url).href)}),m=M(()=>{const o=[...e.gen];return o.sort((n,d)=>e.ItemScale[d]-e.ItemScale[n]),o.slice(2).map(n=>new URL(Object.assign({"../assets/五節芒W.png":N,"../assets/小葉桑W.png":j,"../assets/月桃W.png":L,"../assets/構樹W.png":E,"../assets/穀穗W.png":P,"../assets/赤榕W.png":$,"../assets/金草蘭W.png":A,"../assets/青剛櫟W.png":W})[`../assets/${g[n].nameZh}W.png`],import.meta.url).href)}),s=["#C8AAFF","#ffffff","#7093FF","#FFF2A6"],a={particleCount:100,minSize:4,maxSize:60,minForce:3,maxForce:20,duration:15e3};return B(()=>{setTimeout(()=>{i.value=!1,r.value=!0,setTimeout(()=>{r.value=!1},a.duration)},2e3)}),(o,t)=>{const n=Y("RouterLink");return h(),y("div",Oe,[i.value?(h(),q(Re,{key:0})):V("",!0),C(Ce),r.value?(h(),q(Be,{key:1,colors:s,particleCount:a.particleCount,minSize:a.minSize,maxSize:a.maxSize,minForce:a.minForce,maxForce:a.maxForce,duration:a.duration},null,8,["particleCount","minSize","maxSize","minForce","maxForce","duration"])):V("",!0),t[4]||(t[4]=_("div",{class:"absolute top-0 left-0 z-0 w-full h-[500px] overflow-hidden bg-[#000000]"},null,-1)),_("div",Te,[z(e).gen.length>0?(h(),y("div",Ue,[_("div",qe,[C(X,{images:m.value,config:x.value},null,8,["images","config"]),C(X,{images:S.value,config:c.value},null,8,["images","config"]),_("div",{class:"absolute inset-0 bg-black z-0 pointer-events-none mask-pulse",style:R({"--mask-min":u.value,"--mask-max":p.value,"animation-duration":`${l.value}s`})},null,4),t[0]||(t[0]=_("img",{src:Me,alt:"Example Image",class:"w-full h-auto relative z-10"},null,-1))]),_("div",{class:"relative -top-24 left-0 z-10 w-full h-24",style:R({background:`linear-gradient(to top, ${v.value}, transparent)`})},null,4),t[1]||(t[1]=_("div",{class:"relative -top-12 text-white mt-3 text-[24px] font-bold text-center"}," 你獲得了一隻ＯＯＯ鹿! ",-1)),C(Ne,{Gen:z(e).gen,Rate:z(e).SelectedItemRate},null,8,["Gen","Rate"])])):(h(),y("div",Ve,[t[3]||(t[3]=_("div",{class:"text-white mt-3 text-[18px] font-bold text-center mb-3"}," 你還沒有選擇任何元素，請選擇元素! ",-1)),_("div",Xe,[C(n,{to:"/gen-choose",class:"flex h-12 w-12 items-center justify-center rounded-full border border-[#ffffff] bg-black/60"},{default:D(()=>[...t[2]||(t[2]=[_("span",{class:"text-3xl leading-none text-[#ffffff]"}," › ",-1)])]),_:1})])]))])])}}},Ze=Ie(Ye,[["__scopeId","data-v-2a1b124d"]]);export{Ze as default};
